---
layout: post
title: Improving the development process
author: Shane McCormack
author_github: ShaneMcC
---
One of the things that makes DMDirc good (in my opinion) is that the three main developers actively use it pretty much all day, every day. We are all very, very heavy IRC users (unlike the author of mIRC for instance, who <a href="http://www.mirc.com/khaled/faq.html">admits to only occasionally using IRC</a>), which is what led to us [re]starting DMDirc development — when we all switched to Linux, we couldn't find an existing client that any of us really liked.

From the start we wanted DMDirc to be an excellent client, and we quickly got it into a usable state (I have logs showing me using it in early May 2007).  To help us do this we registered with Google Code, which provided us with a Subversion repository, download hosting and an issue tracker.

In addition to the tools on Google Code we also wrote a service that received error reports from DMDirc clients, and allowed developers to browse them using a web interface. This system never really worked too well; it meant that we in effect had two systems for tracking errors, the automated error system (which was checked manually, and therefore quite infrequently) and the user-facing Google Code issue tracker. The Google Code issue tracker also had quite a few issues of its own [ba-dum-tish] that posed problems for us: we didn't have much control over it, Google were slow to improve it, and it didn't allow for dependencies or private issues. The lack of private issues was the reason we felt the need to have two separate systems at the time — automatically reported errors may in some cases contain private information, so we can't show them publicly.

Sometime just before DMDirc 0.5.5 was released, we decided to start using <a href="http://mantisbt.org">Mantis</a> as our primary issue tracker. Mantis, whilst not perfect, gave us the control we wanted — it's written in PHP (which, like Java, we all know very well), and is easy enough to modify. We imported all of our existing issues from Google Code, using a <a href="http://bugs.dmdirc.com/patches/1.1.0/IssueScrape.py">Python script</a> (yay for multi-language proficiency!) to screenscrape the website and build an XML file, and then a <a href="http://bugs.dmdirc.com/patches/1.1.0/import.phps">PHP script</a> to read the XML file and import the issues into Mantis. With the issues imported, we set about modifying Mantis to better suit our needs.

We (well, Chris and I) had got quite used to using the issue 'grid view' offered by Google code, so one of the first things we did when switching to Mantis was implementing our <a href="http://bugs.dmdirc.com/view_grid_page.php">own version</a> of it. We also improved the error reporting backend to raise new Mantis issues (marked as private, of course). Later on, we also enabled SVN integration, which initially meant writing a script to parse e-mails from Google Code (where our SVN repository was still hosted) and passing the information on to Mantis for it to use. After a while, we modified the integration to include links to <a href="http://fisheye.dmdirc.com">our Fisheye instance</a>, and also map Subversion users to Mantis users in order to add comments with the appropriate username instead of just 'SVN user'.

More recently, we've improved the Fisheye aspect of the integration dramatically; we now access Fisheye and include its representation of the changes directly in Mantis, allowing you to see a list of affected files and even view diffs of the changes without leaving the issue page. We also parse any stack traces in the issue description, and automatically link relevant lines to the Fisheye view of the specified file and revision, if the information is available. You can see an example of both of these modifications in <a href="http://bugs.dmdirc.com/view.php?id=1330">this issue</a>.

Now, as I mentioned above, we are all heavy IRC users so having to periodically check Mantis for new bugs wasn't very appealing to us, so we modified it some more so that it communicated with an IRC bot we have which is designed to relay notifications. Mantis tells us everything that happens — new issues, edited issues, property changes on issues — anything that happens there, we instantly know about it.

This setup worked well for us for about 4 months, after which we decided to switch over to using a self-hosted SVN Repository, which opened up even more possibilities. We added post-commit hooks to replace the email-parsing hacks for Mantis support, enabled reporting of commits to IRC, and created a pre-commit hook to make sure that every commit was linked to an issue on Mantis.

Not long after that we discovered and implemented <a href="http://www.atlassian.com/software/bamboo/">Bamboo</a> into our development process. Bamboo is a <a href="http://en.wikipedia.org/wiki/Continuous_Integration">Continuous Integration</a> server, which means that every time we commit something to the trunk (or active branches), it will rebuild the project on our server, run our collection of unit tests and then publish and store the results. Bamboo also notifies us via Jabber if you cause a build to fail. Of course this wasn't quite perfect, and after a short while we discovered a <a href="http://confluence.atlassian.com/display/BAMEXT/Pre-Post+Build+Command+Plugin">plugin</a> that can execute post-build scripts. One Bash script later and Bamboo was reporting to IRC like everything else. We also, of course, integrated Bamboo with Mantis. If you check <a href="http://bugs.dmdirc.com/view.php?id=1330">this issue</a> again you will see that the results of the build from Bamboo are also reported under the the commit that triggered it.

As mentioned before, we have a collection of <a href="http://en.wikipedia.org/wiki/Unit_testing">unit tests</a> to make sure things work as expected. Every so often we generate <a href="http://reports.dmdirc.com/frame-clover.html">Clover reports</a> to show how much code coverage we have, and in the last month we have also discovered and began using the <a href="http://fest.easytesting.org/">FEST</a> Swing library to allow us to start unit testing the DMDirc GUI.

So as you can see, what we have now is a very tightly integrated system to help ensure that DMDirc is a quality product. Everything reports to IRC so we know as soon as things happen, our issue tracker is almost omnipotent in that it can tell nearly everything about an issue from being raised to being fixed, and to top it all off, we have <a href="http://www.nagios.org/">Nagios</a> running and monitoring it all for us (and of course, this reports to IRC also!)

Of course this setup wouldn't be possible if it wasn't for a few choice products provided for free — <a href="http://mantisbt.org">Mantis</a>, <a href="http://www.atlassian.com/software/fisheye/">Fisheye</a>, <a href="http://www.atlassian.com/software/bamboo/">Bamboo</a>, <a href="http://www.atlassian.com/software/clover">Clover</a> and many others. We would like to thank the developers of these products for helping us make DMDirc great.